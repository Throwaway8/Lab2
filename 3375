#include <stdio.h>
#include "address_map_arm.h"

volatile int * load_ptr = (int*)0xFFC08000;
volatile int * currVal_ptr = (int*)0xFFC08004;
volatile int * ctrl_ptr = (int*)0xFFC8008;
volatile int * endInterrupt_ptr = (int*)0xFFC800C;
volatile int * interrupt_ptr = (int*)0xFFC8010;
volatile int * hex_ptr = (int*)HEX3_HEX0_BASE;
volatile int * hex_ptr2 = (int*)HEX5_HEX4_BASE;
volatile int * button_ptr = (int*)KEY_BASE;

void start()
{
    int count = 0;
    int count2 = 0;
    int count3 = 0;
    int count4 = 0;
    int count5 = 0;
    int count6 = 0;
    int lookUpTable[10];
    lookUpTable[0] = 0x3F;
    lookUpTable[1] = 0x6;
    lookUpTable[2] = 0x5B;
    lookUpTable[3] = 0x4F;
    lookUpTable[4] = 0x66;
    lookUpTable[5] = 0x6D;
    lookUpTable[6] = 0x7D;
    lookUpTable[7] = 0x7;
    lookUpTable[8] = 0x7F;
    lookUpTable[9] = 0x6F;
    
    while(1)
    {
        *(ctrl_ptr) &= 0x000;
        *(load_ptr) |= 0xF4240;
        *(ctrl_ptr) |= 0b11;
    
        if(*(interrupt_ptr) == 1)
        {
            *(hex_ptr) = *lookUpTable+1;
            count++;
            if (count == 9)
            {
                *(hex_ptr+1) = *lookUpTable+1;
                count = 0;
                count2++;
                if(count2 == 9)
                {
                    *(hex_ptr+2) = *lookUpTable+1;
                    count2 = 0;
                    count3++;
                    if(count3 == 0)
                    {
                        *(hex_ptr+3) = *lookUpTable+1;
                        count3 = 0;
                        count4++;
                        if(count4 == 9)
                        {
                            *(hex_ptr+4) = *lookUpTable+1;
                            count4 = 0;
                            count5++;
                            if(count5 == 9)
                            {
                                *(hex_ptr2) = *lookUpTable+1;
                                count5 = 0;
                                count6++;
                                if(count6 == 9)
                                {
                                    *(hex_ptr2+1) = *lookUpTable+1;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

void reset()
{
    *(ctrl_ptr) |= 0b100;
    *(interrupt_ptr) |= 0b1;
    *(load_ptr) = 0x00000000;
    *(ctrl_ptr) |= 0x1;
}

void stop()
{
    *(ctrl_ptr) &= 0x0;
}


int main(int argc, const char * argv[]) {
    
    return 0;
}
